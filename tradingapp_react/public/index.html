<!DOCTYPE html>
<html>

<head>
	<title>TradingView Charting Library demo</title>

	<!-- Fix for iOS Safari zooming bug -->
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge" />

	<script type="text/javascript" src="charting_library/charting_library.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.2/socket.io.js"></script>
	<script type="text/javascript" src="datafeeds/udf/dist/polyfills.js"></script>
	<script type="text/javascript" src="datafeeds/udf/dist/bundle.js"></script>
	<link rel="stylesheet" href="index.css" />
	
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>

<body style="margin: 0px; background-color: #282828">
	<div class="overlay"></div>
	<div style="bottom: 63.4px" id="tv_chart_container"></div>
	<div id="bottom-menu" style="position: fixed; left: 0; right: 0; bottom: 0">
		<div id="candles" class="tabcontent">
			
			<div class="content-center">
				<h4 class="tab-btn-title">CHART TYPE</h4>
			</div>
			<div class="scroll-none" style="overflow-x: auto">
				<ul class="inline-list" id="chart-list"></ul>
			</div>
			<div class="scroll-none" style="overflow-x: auto">
				<ul class="inline-list-2"></ul>
			</div>
		</div>

		<div id="indicators" class="tabcontent" style="padding: 0; border-radius: 12px 12px 0 0; height: 80vh">
			<!--  -->
			<div>
				<div class="tablink-header">
					<button class="tablink2 indicator-tab-active" onclick="openIndicators('indicator', this, 2)"
						id="defaultOpen">
						Indicators
					</button>
					<button class="tablink2" onclick="openIndicators('drawings', this, 2)">
						Drawings
					</button>
				</div>

				<div id="indicator" class="tabcontent2" style="display: block">
					<div class="container-nVh4c_cg">
						<div class="inputContainer-nVh4c_cg">
							<input type="text" class="input-nVh4c_cg" onkeyup="filterIndicator(this)" autocomplete="off"
								data-role="search" placeholder="Search" value="" />
						</div>
						<span class="icon-nVh4c_cg">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none">
								<path stroke="currentColor" d="M12.4 12.5a7 7 0 1 0-4.9 2 7 7 0 0 0 4.9-2zm0 0l5.101 5">
								</path>
							</svg>
						</span>
					</div>
					<div style="height: 65vh; overflow: auto">
						<ul id="indicator-list" class="indicator-lists"></ul>
					</div>
				</div>

				<div id="drawings" class="tabcontent2">
					<div style="height: 70vh; overflow: auto">
						<ul id="drawing-list" class="indicator-lists"></ul>
					</div>
				</div>
			</div>
		</div>
		<div id="indicator-history" class="tabcontent" style="padding: 0; border-radius: 12px 12px 0 0; height: 80vh">

			<div>
				<div class="tablink-header">
					<button class="tablink3 indicator-tab-active" onclick="openIndicators('sel-indicator', this, 3)"
						id="defaultOpen">
						Indicators
					</button>
					<button class="tablink3" onclick="openIndicators('sel-drawings', this, 3)">
						Drawings
					</button>
				</div>

				<div id="sel-indicator" class="tabcontent3" style="display: block">
					<div style="height: 70vh; overflow: auto">
						<ul id="sel-indicator-list" class="indicator-lists"></ul>
					</div>
				</div>

				<div id="sel-drawings" class="tabcontent3">
					<div style="height: 70vh; overflow: auto">
						<ul id="sel-drawing-list" class="indicator-lists"></ul>
					</div>
				</div>
			</div>
		</div>
		<div id="bid" class="tabcontent">
			

			<div class="content-center">
				<h4 class="tab-btn-title">SHOW PRICE</h4>
			</div>
			<div class="content-around">
				<button class="bid-btn">BID</button>
				<button class="bid-btn">ASK</button>
			</div>
		</div>

		<div id="daterange" class="tabcontent">
			
			<div class="content-center">
				<h4 style="text-align: center;margin-bottom: 15px;font-size: 15px;font-weight: 600;">
					PERIOD
				</h4>
			</div>
			<div class="scroll-none" style="overflow-x: auto">
				<ul class="inline-list" id="daterange-list">
					<li>1D</li>
					<li>5D</li>
					<li>2W</li>
					<li>3M</li>
					<li>6M</li>
					<li>1Y</li>
				</ul>
			</div>
		</div>

		<div class="tab">
			<button class="tablinks" onclick="openTab(event, 'indicators')">
				<span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="32" height="32">
						<path fill="currentColor"
							d="M13.5 6a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17zM4 14.5a9.5 9.5 0 1 1 19 0 9.5 9.5 0 0 1-19 0z">
						</path>
						<path fill="currentColor" d="M9 14h4v-4h1v4h4v1h-4v4h-1v-4H9v-1z"></path>
					</svg></span>
			</button>
			<button class="tablinks" onclick="openTab(event, 'candles')">
				<span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="32" height="32" fill="currentColor"><path d="M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"></path><path d="M18 7h1v3.5h-1zm0 10.5h1V21h-1z"></path><path d="M9 8v12h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5z"></path><path d="M10 4h1v3.5h-1zm0 16.5h1V24h-1z"></path></svg></span>
			</button>
			<button class="tablinks" onclick="openTab(event, 'daterange')">
				<span class="icon-a7Y2yl3G"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28">
					<g>
					 <title>Layer 1</title>
					 <path transform="rotate(-90.3604 13.957 13.9458)" stroke="#000" id="svg_4" d="m5.61359,12.8898l16.68691,0l0,0c2.18603,0 3.95816,0.47278 3.95816,1.05597c0,0.5832 -1.77213,1.05597 -3.95816,1.05597l-16.68691,0l0,0c-2.18603,0 -3.95816,-0.47278 -3.95816,-1.05597c0,-0.5832 1.77213,-1.05597 3.95816,-1.05597z" stroke-width="0.1" fill="currentColor"/>
					 <path transform="rotate(-90.3604 8.70677 14.0141)" stroke="#000" id="svg_5" d="m3.09812,12.95816l11.21729,0l0,0c1.46949,0 2.66076,0.47278 2.66076,1.05598c0,0.58319 -1.19126,1.05597 -2.66076,1.05597l-11.21729,0l0,0c-1.4695,0 -2.66076,-0.47278 -2.66076,-1.05597c0,-0.5832 1.19126,-1.05598 2.66076,-1.05598z" stroke-width="0.1" fill="currentColor"/>
					 <path transform="rotate(-90.3604 19.6194 14.0802)" stroke="#000" id="svg_6" d="m14.01077,13.0243l11.21729,0l0,0c1.46949,0 2.66075,0.47278 2.66075,1.05598c0,0.58319 -1.19126,1.05597 -2.66075,1.05597l-11.21729,0l0,0c-1.4695,0 -2.66075,-0.47278 -2.66075,-1.05597c0,-0.5832 1.19125,-1.05598 2.66075,-1.05598z" stroke-width="0.1" fill="currentColor"/>
					 <path transform="rotate(-90.3604 3.96551 14.8399)" stroke="#000" id="svg_7" d="m0.57668,13.78388l6.77766,0l0,0c0.88789,0 1.60767,0.47278 1.60767,1.05598c0,0.58319 -0.71978,1.05597 -1.60767,1.05597l-6.77766,0l0,0c-0.88789,0 -1.60767,-0.47278 -1.60767,-1.05597c0,-0.5832 0.71977,-1.05598 1.60767,-1.05598z" stroke-width="0.1" fill="currentColor"/>
					 <path transform="rotate(-90.3604 24.7988 14.906)" stroke="#000" id="svg_8" d="m21.40993,13.85002l6.77766,0l0,0c0.88788,0 1.60766,0.47278 1.60766,1.05598c0,0.58319 -0.71978,1.05597 -1.60766,1.05597l-6.77766,0l0,0c-0.8879,0 -1.60767,-0.47278 -1.60767,-1.05597c0,-0.5832 0.71977,-1.05598 1.60767,-1.05598z" stroke-width="0.1" fill="currentColor"/>
					</g>
				   
				   </svg></span>
			</button>
			<button class="tablinks" onclick="openTab(event, 'bid')">
				<span><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28">
					<g>
					 <title>Layer 1</title>
					 <path fill="currentColor" d="m21.9647,11.43279l2.74279,0.05664c-0.43636,-8.85223 -13.28071,-8.68847 -13.55004,0.57871l-0.55277,5.66242c-0.63075,2.52464 -3.00201,2.46253 -5.45676,2.1736l-0.90917,2.50977c5.25416,0.24802 8.21083,0.42111 9.43845,-4.63255l0.56712,-5.62266c0.34556,-5.68163 7.16603,-5.72729 7.72038,-0.72594l0,0.00001z" id="svg_7" stroke-width="0.1" stroke="#000"/>
					 <rect stroke="#000" id="svg_1" height="2.60318" width="24.14012" y="13.07909" x="1.60097" stroke-width="0.1" fill="currentColor"/>
					</g>
				   
				   </svg></span>
			</button>
			<button class="tablinks" id="sel-history" style="float: left; display: none;"
				onclick="openTab(event, 'indicator-history')">
				<span style="position:relative;">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="32" height="32">
						<g fill="currentColor">
							<path fill-rule="nonzero"
								d="M14 18.634l-.307-.239-7.37-5.73-2.137-1.665 9.814-7.633 9.816 7.634-.509.394-1.639 1.269-7.667 5.969zm7.054-6.759l1.131-.876-8.184-6.366-8.186 6.367 1.123.875 7.063 5.491 7.054-5.492z">
							</path>
							<path d="M7 14.5l-1 .57 8 6.43 8-6.5-1-.5-7 5.5z"></path>
							<path d="M7 17.5l-1 .57 8 6.43 8-6.5-1-.5-7 5.5z"></path>
						</g>
					</svg>
					<span class="badge" id="sel-indicator-cnt" style="position: absolute; font-size: 12px;top: -19px;
					right: -9px;">0</span>
				</span>
				
			</button>
		</div>
		<div class="content-around draw-pane">
			<button class="del-btn" onclick="drawDone(0)">DELETE</button>
			<button class="bid-btn" onclick="drawDone(1)">DONE</button>
		</div>
	</div>
</body>

<script type="text/javascript">
	
	var g_period = ['D', '5D', '2W', 'M', '3M', '6M'];
	var g_chartType = [
		"Bars",
		"Candles",
		"Line",
		"Area",
		"BaseLine",
		"Kagi",
		"PointAndFigure",
		"LineBreak",
		"HeikenAshi",
		"HollowCandles",
		"BaseLine",
	];
	var g_chartType_svg = [
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="45" height="45" fill="currentColor"><path d="M18 6h1v16h-1z"></path><path d="M18.5 18H22v1h-3.5zM15 13h3.5v1H15zm-5-6h1v16h-1z"></path><path d="M10.5 9H14v1h-3.5zM7 20h3.5v1H7z"></path></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="45" height="45" fill="currentColor"><path d="M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"></path><path d="M18 7h1v3.5h-1zm0 10.5h1V21h-1z"></path><path d="M9 8v12h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5z"></path><path d="M10 4h1v3.5h-1zm0 16.5h1V24h-1z"></path></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="45" height="45"><path fill="currentColor" d="M11.982 16.689L17.192 12h3.033l4.149-4.668-.748-.664L19.776 11h-2.968l-4.79 4.311L9 12.293l-4.354 4.353.708.708L9 13.707z"></path></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="45" height="45" fill="currentColor"><path d="M12.5 17.207L18.707 11h2l3.647-3.646-.708-.708L20.293 10h-2L12.5 15.793l-3-3-4.854 4.853.708.708L9.5 14.207z"></path><path d="M9 16h1v1H9zm1 1h1v1h-1zm-1 1h1v1H9zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1H9zm2 0h1v1h-1zm-3-3h1v1H8zm-1 1h1v1H7zm-1 1h1v1H6zm2 0h1v1H8zm-1 1h1v1H7zm-2 0h1v1H5zm17-9h1v1h-1zm1-1h1v1h-1zm0 2h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-5-7h1v1h-1zm2 0h1v1h-1zm1-1h1v1h-1zm-2 2h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-2-6h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-3-3h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1z"></path></svg>',
		'',
		'',
		'',
		'',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="45" height="45" fill="currentColor"><path d="M9 8v12h3V8H9zm-1-.502C8 7.223 8.215 7 8.498 7h4.004c.275 0 .498.22.498.498v13.004a.493.493 0 0 1-.498.498H8.498A.496.496 0 0 1 8 20.502V7.498z"></path><path d="M10 4h1v3.5h-1z"></path><path d="M17 6v6h3V6h-3zm-1-.5c0-.276.215-.5.498-.5h4.004c.275 0 .498.23.498.5v7c0 .276-.215.5-.498.5h-4.004a.503.503 0 0 1-.498-.5v-7z"></path><path d="M18 2h1v3.5h-1z"></path></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="45" height="45" fill="currentColor"><path d="M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"></path><path d="M18 7h1v3.5h-1zm0 10.5h1V21h-1z"></path><path d="M9 8v11h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-12a.5.5 0 0 1 .5-.5z"></path><path d="M10 4h1v5h-1zm0 14h1v5h-1zM8.5 9H10v1H8.5zM11 9h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11z"></path></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="45" height="45"><g fill="none" stroke="currentColor"><path stroke-dasharray="1,1" d="M4 14.5h22"></path><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 12.5l2-4 1 2 2-4 3 6"></path><path stroke-linecap="round" d="M5.5 16.5l-1 2"></path><path stroke-linecap="round" stroke-linejoin="round" d="M17.5 16.5l2 4 2-4m2-4l1-2-1 2z"></path></g></svg>',
	];
	var g_chartUnit = ["1m", "5m", "15m", "30m", "1H", "5H"];
	var g_indicators = ['Accumulation/Distribution', 'Accumulative Swing Index', 'Advance/Decline', 'Arnaud Legoux Moving Average', 'Aroon', 'Average Directional Index', 'Average True Range', 'Awesome Oscillator', 'Balance of Power', 'Bollinger Bands', 'Bollinger Bands %B', 'Bollinger Bands Width', 'Chaikin Money Flow', 'Chaikin Oscillator', 'Chande Kroll Stop', 'Chande Momentum Oscillator', 'Chop Zone', 'Choppiness Index', 'Commodity Channel Index', 'Connors RSI', 'Coppock Curve', 'Correlation Coeff', 'Detrended Price Oscillator', 'Directional Movement Index', 'Donchian Channels', 'Double Exponential Moving Average', 'Ease of Movement', 'Elders Force Index', 'EMA Cross', 'Envelope', 'Fisher Transform', 'Historical Volatility', 'Hull MA', 'Ichimoku Cloud', 'Keltner Channels', 'Klinger Oscillator', 'Know Sure Thing', 'Least Squares Moving Average', 'Linear Regression Curve', 'MA Cross', 'MA with EMA Cross', 'Mass Index', 'McGinley Dynamic', 'Momentum', 'Money Flow', 'Moving Average', 'Moving Average Channel', 'MACD', 'Moving Average Exponential', 'Moving Average Weighted', 'Net Volume', 'On Balance Volume', 'Parabolic SAR', 'Price Channel', 'Price Oscillator', 'Price Volume Trend', 'Rate Of Change', 'Relative Strength Index', 'Relative Vigor Index', 'Relative Volatility Index', 'SMI Ergodic Indicator/Oscillator', 'Smoothed Moving Average', 'Stochastic', 'Stochastic RSI', 'TRIX', 'Triple EMA', 'True Strength Indicator', 'Ultimate Oscillator', 'VWAP', 'VWMA', 'Volume Oscillator', 'Vortex Indicator', 'Williams %R', 'Williams Alligator', 'Williams Fractals', 'Volume', 'Zig Zag', 'SuperTrend', 'Pivot Points Standard', 'Spread', 'Ratio'];
	var g_drawing = ['Arrow', 'Channel', 'Eliotte wave(12345)', 'Eliotte wave(ABC)', 'Gann fan', 'Trend angle', 'Head and shoulders', 'Horizontal line', 'Point to point', 'Ellipse', 'Pitchfork', 'Rectangle', 'Trend', 'Triangle', 'Vertical line'];
	var g_drawing_pram = ["arrow","parallel_channel", "elliott_impulse_wave", "elliott_correction", 
    "gannbox_fan","trend_angle", "head_and_shoulders", "horizontal_line", "trend_line", "ellipse", "pitchfork", "rectangle", "extended", "triangle","vertical_line"];
	var g_drawing_svg = [
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g><path fill-rule="nonzero" d="M7.354 21.354l14-14-.707-.707-14 14z"></path><path d="M21 7l-8 3 5 5z"></path><path fill-rule="nonzero" d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M8.354 18.354l10-10-.707-.707-10 10zM12.354 25.354l5-5-.707-.707-5 5z"></path><path d="M20.354 17.354l5-5-.707-.707-5 5z"></path><path d="M19.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"></path><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path><path d="M11.148 7h-1.098v-4.137c-.401.375-.874.652-1.418.832v-.996c.286-.094.598-.271.934-.533.336-.262.566-.567.691-.916h.891v5.75z"></path><path d="M23.355 5.527l1.094-.113c.031.247.124.443.277.588.154.145.331.217.531.217.229 0 .423-.093.582-.279.159-.186.238-.467.238-.842 0-.352-.079-.615-.236-.791-.158-.176-.363-.264-.615-.264-.315 0-.598.139-.848.418l-.891-.129.563-2.98h2.902v1.027h-2.07l-.172.973c.245-.122.495-.184.75-.184.487 0 .9.177 1.238.531.339.354.508.814.508 1.379 0 .471-.137.892-.41 1.262-.372.505-.889.758-1.551.758-.529 0-.96-.142-1.293-.426-.333-.284-.533-.665-.598-1.145z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g><path fill-rule="nonzero" d="M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"></path><path fill-rule="nonzero" d="M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path><path d="M13.746 7h-1.258l-.5-1.301h-2.289l-.473 1.301h-1.227l2.23-5.727h1.223l2.293 5.727zm-2.129-2.266l-.789-2.125-.773 2.125h1.563z"></path><path d="M26.246 4.895l1.121.355c-.172.625-.458 1.089-.857 1.393-.4.303-.907.455-1.521.455-.76 0-1.385-.26-1.875-.779-.49-.52-.734-1.23-.734-2.131 0-.953.246-1.693.738-2.221.492-.527 1.139-.791 1.941-.791.701 0 1.27.207 1.707.621.26.245.456.596.586 1.055l-1.145.273c-.068-.297-.209-.531-.424-.703-.215-.172-.476-.258-.783-.258-.424 0-.769.152-1.033.457-.264.305-.396.798-.396 1.48 0 .724.13 1.24.391 1.547.26.307.599.461 1.016.461.307 0 .572-.098.793-.293.221-.195.38-.503.477-.922z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M7.354 21.354l7.097-7.097-.707-.707-7.097 7.097z"></path><path d="M17.249 11.458l7.105-7.105-.707-.707-7.105 7.105z"></path><path d="M7.542 22.683l17.296-2.739-.156-.988-17.296 2.739z" id="Line"></path><path d="M7.538 22.062l15.708-7.661-.438-.899-15.708 7.661z"></path><path d="M6.802 20.97l7.695-15.777-.899-.438-7.695 15.777z"></path><path d="M6.285 20.741l2.76-17.423-.988-.156-2.76 17.423z"></path><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM15.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M15.5 22.5c0-2.697-1.073-5.225-2.947-7.089l-.705.709c1.687 1.679 2.652 3.952 2.652 6.38h1z"></path><path d="M7.354 21.354l14-14-.707-.707-14 14z"></path><path d="M7.5 23h16.5v-1h-16.5z"></path><path d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M4.436 21.667l2.083-9.027-.974-.225-2.083 9.027zM10.046 16.474l-2.231-4.463-.894.447 2.231 4.463zM13.461 6.318l-2.88 10.079.962.275 2.88-10.079zM18.434 16.451l-2.921-10.224-.962.275 2.921 10.224zM21.147 12.089l-2.203 4.405.894.447 2.203-4.405zM25.524 21.383l-2.09-9.055-.974.225 2.09 9.055z"></path><path d="M1 19h7.5v-1h-7.5z"></path><path d="M12.5 19h4v-1h-4z"></path><path d="M20.5 19h6.5v-1h-6.5z"></path><path d="M6.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M4 15h8.5v-1h-8.5zM16.5 15h8.5v-1h-8.5z"></path><path d="M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M7.354 21.354l14-14-.707-.707-14 14z"></path><path d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M12.435 6.136c-4.411.589-7.983 3.039-9.085 6.27l.946.323c.967-2.836 4.209-5.059 8.271-5.602l-.132-.991zM3.347 16.584c1.101 3.243 4.689 5.701 9.117 6.283l.13-.991c-4.079-.537-7.335-2.767-8.301-5.613l-.947.321zM16.554 22.865c4.381-.582 7.94-3 9.071-6.2l-.943-.333c-.994 2.811-4.224 5.006-8.26 5.542l.132.991zM25.646 12.394c-1.107-3.225-4.675-5.668-9.078-6.257l-.133.991c4.056.542 7.293 2.76 8.265 5.591l.946-.325z"></path><path d="M14.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M7.275 21.432l12.579-12.579-.707-.707-12.579 12.579z"></path><path d="M6.69 13.397l7.913 7.913.707-.707-7.913-7.913zM7.149 10.558l7.058-7.058-.707-.707-7.058 7.058z"></path><path d="M18.149 21.558l7.058-7.058-.707-.707-7.058 7.058z"></path><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M7.5 6h13v-1h-13z" id="Line"></path><path d="M7.5 23h13v-1h-13z"></path><path d="M5 7.5v13h1v-13z"></path><path d="M22 7.5v13h1v-13z"></path><path d="M5.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M4.354 25.354l5-5-.707-.707-5 5z"></path><path d="M12.354 17.354l5-5-.707-.707-5 5z"></path><path d="M20.354 9.354l5-5-.707-.707-5 5z"></path><path d="M18.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M8.5 23h11v-1h-11zM6 8.5v12h1v-12zM7.483 8.28l12.293 13.112.73-.684-12.293-13.112z"></path><path d="M6.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM21.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
		'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="#bb8961" style="margin:0 10px -5px 0;"><g fill-rule="nonzero"><path d="M15 12.5v-8.5h-1v8.5zM14 16.5v8.5h1v-8.5z"></path><path d="M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',
	];
	var g_selectedIndicators = [];

	var log_flag = 1;
	function log(tag, obj){
		if(log_flag)
			console.log(tag+'====='+obj);
	}
	//ready
	function init() {
		var str1 = "";
		for (let i = 0; i < g_period.length; i++) {
			str1 = str1 + '<li onclick="drawByPeriod(' + i + ', this)">' + g_period[i] + "</li>";
		}
		$("#daterange-list").html(str1);

		var str2 = "";
		for (let i = 0; i < g_chartType.length; i++) {
			if (i < 4 || i > 8)
				str2 = str2 + '<li onclick="drawByChartType(' + i + ', this)">' + g_chartType_svg[i] + "</li>";
		}
		$("#chart-list").html(str2);

		var str4 = "";
		for (let i = 0; i < g_chartUnit.length; i++) {
			str4 = str4 + '<li onclick="drawByChartUnit(' + i + ', this)">' + g_chartUnit[i] + "</li>";
		}
		$(".inline-list-2").html(str4);

		var str3 = "";
		for (let i = 0; i < g_indicators.length; i++) {
			if (g_indicators[i].toLowerCase()=='spread' || g_indicators[i].toLowerCase()=='ratio') 
				continue;
			str3 = str3 + '<li style="padding: 5px 10px; padding-left:0px !important" name="' + g_indicators[i] + '" onclick="drawByIndicator(' + i + ', this)" ><div style="padding: 10px;"><span style="padding: 10px 0;">' + g_indicators[i] + '</span><span style="float: right; font-size: 25px;margin: -8px;">+</span></div></li>';
		}
		$("#indicator-list").html(str3);

		var str5 = "";
		for (let i = 0; i < g_drawing.length; i++) {
			str5 = str5 + '<li style="padding: 5px 10px; padding-left:0px !important" name="' + g_drawing[i] + '" onclick="drawByDrawing(' + i + ', this)" ><div style="padding: 10px;">' + g_drawing_svg[i] + '<span style="padding: 10px 0;">' + g_drawing[i] + '</span><span style="float: right; font-size: 25px;">+</span></div></li>';
		}
		$("#drawing-list").html(str5);
	}

	function getParameterByName(name) {
		name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
		var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
			results = regex.exec(location.search);
		return results === null
			? ""
			: decodeURIComponent(results[1].replace(/\+/g, " "));
	}
 
    const sendDataToReactNativeApp = async () => {
        window.ReactNativeWebView.postMessage('Data from WebView / Website');
    };
    var datafeed = null;
    window.addEventListener("message", message => {
        datafeed = message.data
    });
           
	var widget = null;
	TradingView.onready(function () {
		widget = window.tvWidget = new TradingView.widget({
			// debug: true, // uncomment this line to see Library errors and warnings in the console
			fullscreen: false,
			height: (window.innerHeight - $('.tab').height()) + 'px',
			width: "100%",
			symbol: "Bitfinex:BTC/USD",
			interval: "W",
			container_id: "tv_chart_container",
			//	BEWARE: no trailing slash is expected in feed URL
			datafeed: new Datafeeds.UDFCompatibleDatafeed(),
			library_path: "charting_library/",
			locale: getParameterByName("lang") || "en",

			disabled_features: ["use_localstorage_for_settings"],
			preset: "mobile",
			auto_save_delay: 2000,
			overrides: {
				"paneProperties.background": "#191919",
				"paneProperties.vertGridProperties.color": "#323232",
				"paneProperties.horzGridProperties.color": "#323232",
				"symbolWatermarkProperties.transparency": 90,
				"scalesProperties.textColor": "#AAA",
			},
		});
		setTimeout(() => {
			//g_indicators = widget.getStudiesList();
			//console.log(g_indicators);
			//g_period = widget.getIntervals();
			log('kch', widget);
			init();
		}, 2000);
	});

	function drawByPeriod(index, e) {
		$(".period-active").removeClass("period-active");
		var data = ["1", "5", "15", "30", "60", "300"];
		e.className = "period-active";
		widget.setSymbol("Bitfinex:BTC/USD", g_period[index]);
	}

	function drawByChartType(index, e) {
		$(".chart-active").removeClass("chart-active");
		e.className = "chart-active";
		widget.chart().setChartType(index);
	}

	function drawByChartUnit(index, e) {
		$(".timeunit-active").removeClass("timeunit-active");
		var data = ["1", "5", "15", "30", "60", "300"];
		e.className = "timeunit-active";
		widget.setSymbol("Bitfinex:BTC/USD", data[index]);
	}


	//draw indicator in diplay
	var g_selIndicIds = [];
	function drawByIndicator(index, e) {
		//$('.indicator-active').removeClass('indicator-active');
		if (g_selectedIndicators.includes(index)) {
			return;
		}
		// if (g_selectedIndicators.length >= 5) {
		// 	alert('bigger than limit.');
		// 	return;
		// }
		g_selectedIndicators.push(index);
		$('#sel-indicator-cnt').text(g_selectedIndicators.length+g_selectedShapeIndexes.length);
		//add select history list
		selectedIndicator(index);
		if ((g_selectedIndicators.length+g_selectedShapeIndexes.length) > 0)
			$('#sel-history').css('display', 'block');
		e.className = "indicator-active";
		//const obj_id = widget.chart().createStudy(g_indicators[index]);
		const obj_id = widget.chart().createStudy(g_indicators[index]);
		log('indicatorid===', g_indicators[index])
		g_selIndicIds.push(obj_id);
	}

	//draw shape of line tools 
	var g_selectedShapeIndexes = [];
	var g_selShapeIds = [];
	var g_selDrawIndex = 0;
	function drawByDrawing(index, e) {
		initTab();
		
		$('.draw-pane').css('display', 'flex');
		g_selDrawIndex = index
		
		widget.selectLineTool(g_drawing_pram[index]);
		log('kch', g_selectedShapeIndexes);
	}

	function drawDone(flag) {
		$('.draw-pane').css('display', 'none');
		var arr = widget.chart().getAllShapes();
		if (arr.length == 0) {
			return;
		}
		var shape_id = arr[arr.length-1].id;
		if(!flag) {
			//delete shape
			widget.chart().removeEntity(shape_id);
			return;
		}
			
		g_selShapeIds.push(shape_id);
		g_selectedShapeIndexes.push(g_selDrawIndex);
		$('#sel-indicator-cnt').text(g_selectedIndicators.length+g_selectedShapeIndexes.length);
		if ((g_selectedIndicators.length+g_selectedShapeIndexes.length) > 0)
			$('#sel-history').css('display', 'block');
		//add select history list
		selectedDrawing(g_selDrawIndex);
		
	}
	
	//remove indicator in chart
	function deleteIndicator(index) {
		$('#sel_indic_'+index).remove();
		const result = g_selectedIndicators.filter(function checkIdic(id) { return id != index; });
		const id_index = g_selectedIndicators.findIndex(function checkAdult(id) { return id == index; });
		$('[name="'+g_indicators[index]+'"]').removeClass('indicator-active');
		g_selectedIndicators = result;
		$('#sel-indicator-cnt').text(g_selectedIndicators.length+g_selectedShapeIndexes.length);
		
		widget.chart().removeEntity(g_selIndicIds[id_index]);
		const result1 = g_selIndicIds.filter(function checkIdic(id) { return id != g_selIndicIds[id_index]; });
		g_selIndicIds = result1;
		if ((g_selectedIndicators.length+g_selectedShapeIndexes.length) === 0) {
			$('#sel-history').css('display', 'none');
			initTab();
			
		}
		
	}

	//remove shape in chart
	function deleteDrawing(index) {
		$('#sel_draw_'+index).remove();

		const id_index = g_selectedShapeIndexes.findIndex(function fun2(id) { return id == index; });
		const result = g_selectedShapeIndexes.filter(function fun1(id) { return id != index; });
		g_selectedShapeIndexes = result;

		log('g_selectedShapeIndexes', g_selectedShapeIndexes);
		log('shape-index', id_index);
		log('shape-ids', g_selShapeIds);
		widget.chart().removeEntity(g_selShapeIds[id_index]);
		const result1 = g_selShapeIds.filter(function fun3(id) { return id != g_selShapeIds[id_index]; });
		g_selShapeIds = result1;
		
		$('#sel-indicator-cnt').text(g_selectedIndicators.length+g_selectedShapeIndexes.length);
		if ((g_selectedIndicators.length+g_selectedShapeIndexes.length) === 0) {
			$('#sel-history').css('display', 'none');
			initTab();
			
		}
	}


	//select bottom menu
	var g_selMenu = "";
	function openTab(evt, tabName) {
		
		if (g_selMenu === tabName) {
			initTab();
			g_selMenu = '';
			return;
		}
		g_selMenu = tabName;
		initTab();
		$('.overlay').css('display', 'block');
		document.getElementById(tabName).style.display = "block";
		evt.currentTarget.className += " active";
	}

	function initTab(){
		var i, tabcontent, tablinks;
		$('.overlay').css('display', 'none');
		tabcontent = document.getElementsByClassName("tabcontent");
		for (i = 0; i < tabcontent.length; i++) {
			tabcontent[i].style.display = "none";
		}
		tablinks = document.getElementsByClassName("tablinks");
		for (i = 0; i < tablinks.length; i++) {
			tablinks[i].className = tablinks[i].className.replace(" active", "");
		}
	}

	$('.overlay').click(function(){
		
		initTab();
	});

	//select effect in indicator & drawing page
	function openIndicators(pageName, elmnt, id) {
		var i, tabcontent2, tablink2s;
		tabcontent2 = document.getElementsByClassName("tabcontent"+id);
		for (i = 0; i < tabcontent2.length; i++) {
			tabcontent2[i].style.display = "none";
		}
		tablink2s = document.getElementsByClassName("tablink"+id);
		for (i = 0; i < tablink2s.length; i++) {
			tablink2s[i].classList.remove("indicator-tab-active");
		}
		document.getElementById(pageName).style.display = "block";
		elmnt.classList.add("indicator-tab-active");
	}

	//search indicator
	function filterIndicator(obj) {
		var serch_str = obj.value;
		$("#indicator-list")
			.children()
			.each(function (index) {
				var name = $(this).text();
				if (name.toLowerCase().includes(serch_str.toLowerCase()))
					$(this).css("display", "block");
				else $(this).css("display", "none");
				//console.log('kch',  index + ": " + $( this ).text() );
			});
	}
	
	//add indicator item to history list
	function selectedIndicator(id) {
		var str = '';
		//for (let index = 0; index < g_selectedIndicators.length; index++) {
			str = str + '<li style="padding: 5px 10px; padding-left:0px !important" id="sel_indic_' +
				id + '"><div style="padding: 10px;"><span style="padding-right: 10px; color:#bb8961" onclick="deleteIndicator('+id+')"><svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17" fill="currentColor" style="margin-bottom: -3px;"><path d="m.58 1.42.82-.82 15 15-.82.82z"></path><path d="m.58 15.58 15-15 .82.82-15 15z"></path></svg></span><span style="padding: 10px 0;">' +
				g_indicators[id] +
				'</span><span style="float: right; font-size: 25px;margin: -8px; color:#bb8961"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"fill="#bb8961"><path d="M7.127 22.562l-7.127 1.438 1.438-7.128 5.689 5.69zm1.414-1.414l11.228-11.225-5.69-5.692-11.227 11.227 5.689 5.69zm9.768-21.148l-2.816 2.817 5.691 5.691 2.816-2.819-5.691-5.689z"/><path xmlns="http://www.w3.org/2000/svg" d="M7.127 22.562l-7.127 1.438 1.438-7.128 5.689 5.69zm1.414-1.414l11.228-11.225-5.69-5.692-11.227 11.227 5.689 5.69zm9.768-21.148l-2.816 2.817 5.691 5.691 2.816-2.819-5.691-5.689z"/></svg></span></div></li>';
		//}
		$('#sel-indicator-list').append(str);
	}

	function selectedDrawing(id) {
		var str = '';
		str = str + '<li style="padding: 5px 10px; padding-left:0px !important" id="sel_draw_' + id + '"><div style="padding: 10px;">'+g_drawing_svg[id]+'<span style="padding: 10px 0;">' + g_drawing[id] + '</span><span style="float: right; font-size: 25px;margin: -8px;"><span style="padding-right: 10px; color:#bb8961" onclick="deleteDrawing('+id+')"><svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17" fill="currentColor" style="margin-bottom: -8px;"><path d="m.58 1.42.82-.82 15 15-.82.82z"></path><path d="m.58 15.58 15-15 .82.82-15 15z"></path></svg></span></span></div></li>';
		
		$('#sel-drawing-list').append(str);
	}
	
</script>

</html>